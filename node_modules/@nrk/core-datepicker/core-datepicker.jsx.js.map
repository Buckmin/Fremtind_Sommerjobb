{"version":3,"file":"core-datepicker.jsx.js","sources":["../utils.js","node_modules/@nrk/simple-date-parse/index.min.js","core-datepicker.js","../../node_modules/@nrk/custom-element-to-react/lib/custom-element-to-react.mjs","core-datepicker.jsx"],"sourcesContent":["export const IS_BROWSER = typeof window !== 'undefined'\nexport const IS_ANDROID = IS_BROWSER && /(android)/i.test(navigator.userAgent) // Bad, but needed\nexport const IS_IOS = IS_BROWSER && /iPad|iPhone|iPod/.test(String(navigator.platform))\n\n// Mock HTMLElement for Node\nif (!IS_BROWSER && !global.HTMLElement) {\n  global.HTMLElement = class {}\n}\n\n/**\n* addEvent\n* @param {String} nodeName An unique ID of the event to bind - ensurnes single instance\n* @param {String} type The type of event to bind\n* @param {Function} handler The function to call on event\n* @param {Boolean|Object} options useCapture or options object for addEventListener. Defaults to false\n*/\nexport function addEvent (nodeName, type, handler, options = false, key) {\n  if (!IS_BROWSER || window[key = `event-${nodeName}-${type}`]) return // Ensure single instance\n  const node = (type === 'resize' || type === 'load') ? window : document\n  node.addEventListener(window[key] = type, (event) => (event.nodeName = nodeName) && handler(event), options)\n}\n\n/**\n* addStyle\n* @param {String} nodeName An unique ID of the event to bind - ensurnes single instance\n* @param {String} css The css to inject\n*/\nexport function addStyle (nodeName, css) {\n  const key = `style-${nodeName.toLowerCase()}`\n  const min = css.replace(/\\/\\*[^!][^*]*\\*\\//g, '').replace(/\\s*(^|[:;,{}]|$)\\s*/g, '$1')\n  document.getElementById(key) || document.head.insertAdjacentHTML('afterbegin', `<style id=\"${key}\">${min}</style>`)\n}\n\n/**\n* escapeHTML\n* @param {String} str A string with potential html tokens\n* @return {String} Escaped HTML string according to OWASP recommendation\n*/\nconst ESCAPE_MAP = { '&': '&amp;', '<': '&lt;', '>': '&gt;', '\"': '&quot;', '/': '&#x2F;', '\\'': '&#x27;' }\nexport function escapeHTML (str) {\n  return String(str || '').replace(/[&<>\"'/]/g, (char) => ESCAPE_MAP[char])\n}\n\n/**\n* closest\n* @param {Element} element Element to traverse up from\n* @param {String} selector A selector to search for matching parents or element itself\n* @return {Element|null}  Element which is the closest ancestor matching selector\n*/\nexport const closest = (() => {\n  const proto = typeof window === 'undefined' ? {} : window.Element.prototype\n  const match = proto.matches || proto.msMatchesSelector || proto.webkitMatchesSelector\n  return proto.closest ? (el, css) => el.closest(css) : (el, css) => {\n    // IE jumps to shadow SVG DOM on clicking an SVG defined by <use>.\n    // If so, jump back to <use> element and traverse real DOM\n    if (el.correspondingUseElement) el = el.correspondingUseElement\n    for (;el; el = el.parentElement) if (match.call(el, css)) return el\n    return null\n  }\n})()\n\n/**\n* dispatchEvent - with infinite loop prevention\n* @param {Element} elem The target object\n* @param {String} name The source object(s)\n* @param {Object} detail Detail object (bubbles and cancelable is set to true)\n* @return {Boolean} Whether the event was canceled\n*/\nexport function dispatchEvent (element, name, detail = {}) {\n  const ignore = `prevent_recursive_dispatch_maximum_callstack${name}`\n  let event\n\n  if (element[ignore]) return true // We are already processing this event, so skip sending a new one\n  else element[ignore] = true // Add name to dispatching ignore\n\n  if (typeof window.CustomEvent === 'function') {\n    event = new window.CustomEvent(name, { bubbles: true, cancelable: true, detail })\n  } else {\n    event = document.createEvent('CustomEvent')\n    event.initCustomEvent(name, true, true, detail)\n  }\n  // IE reports incorrect event.defaultPrevented\n  // but correct return value on element.dispatchEvent\n  const result = element.dispatchEvent(event)\n  element[ignore] = null // Remove name from dispatching ignore\n\n  return result // Follow W3C standard for return value\n}\n\n/**\n* getUUID\n* @return {String} A generated unique ID\n*/\nexport function getUUID () {\n  return Date.now().toString(36) + Math.random().toString(36).slice(2, 5)\n}\n\n/**\n * throttle\n * @param {Function} callback  The new throttled function\n * @param {Number} ms The threshold of milliseconds between each callback\n */\nexport function throttle (callback, ms) {\n  let timer\n  return function (...args) {\n    if (!timer) {\n      timer = setTimeout(function () {\n        callback.apply(this, args)\n        timer = null\n      }, ms)\n    }\n  }\n}\n\n/**\n * toggleAttribute (Ponyfill for IE and Edge, fixes #299)\n * @link https://developer.mozilla.org/en-US/docs/Web/API/Element/toggleAttribute\n * @param {Element} el  Single DOM Element\n * @param {String} name The name of the attribute to be toggled\n * @param {Boolean} force Force attribute to be added or removed regardless of previous state\n */\nexport function toggleAttribute (el, name, force = !this.hasAttribute(name)) {\n  if (!force === el.hasAttribute(name)) el[force ? 'setAttribute' : 'removeAttribute'](name, '')\n  return force\n}\n\n/**\n* queryAll\n* @param {String|NodeList|Array|Element} elements A CSS selector string, nodeList, element array, or single element\n* @param {Element} context Node to look for elements within\n* @return {Element[]} Array of elements\n*/\nexport function queryAll (elements, context = document) {\n  if (elements) {\n    if (elements.nodeType) return [elements]\n    if (typeof elements === 'string') return [].slice.call(context.querySelectorAll(elements))\n    if (elements.length) return [].slice.call(elements)\n  }\n  return []\n}\n","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=e||self).simpleDateParse=t()}(this,function(){\"use strict\";var D={year:\"FullYear\",month:\"Month\",week:\"Date\",day:\"Date\",hour:\"Hours\",minute:\"Minutes\",second:\"Seconds\"},w=/([+-]\\s*\\d+)\\s*(second|minute|hour|day|week|month|year)|(mon)|(tue)|(wed)|(thu)|(fri)|(sat)|(sun)/g,M=/([-\\dy]+)[-/.]([\\dm]+)[-/.]([\\dd]+)/,p=/([\\dh]+):([\\dm]+):?([\\ds]+)?/;return function(e,t){if(isFinite(e))return new Date(Number(e));var n=String(e).toLowerCase(),r=new Date(isFinite(t)&&-1===n.indexOf(\"now\")?Number(t):Date.now()),a=n.match(M)||[],o=a[1];void 0===o&&(o=\"y\");var i=a[2];void 0===i&&(i=\"m\");var s=a[3];void 0===s&&(s=\"d\");var d=n.match(p)||[],u=d[1];void 0===u&&(u=\"h\");var h=d[2];void 0===h&&(h=\"m\");var m=d[3];void 0===m&&(m=\"s\");var c={year:o,month:i,day:s,hour:u,minute:h,second:m};Object.keys(c).forEach(function(e){var t=\"month\"===e?1:0,a=String(r[\"get\"+D[e]]()+t);c[e]=c[e].replace(/[^-\\d]+/g,function(e,t,n){return t?a.substr(a.length-n.length+t,e.length):a.substr(0,Math.max(0,a.length-n.length+e.length))})-t});var f=new Date(c.year,Math.min(12,c.month+1),0).getDate();for(r.setFullYear(c.year,Math.min(11,c.month),Math.max(1,Math.min(f,c.day))),r.setHours(Math.min(24,c.hour),Math.min(59,c.minute),Math.min(59,c.second));null!==(c=w.exec(n));){var g=c[2],l=String(c[1]).replace(/\\s/g,\"\")*(\"week\"===g?7:1),v=c.slice(2).indexOf(c[0]),y=r.getDate();g?r[\"set\"+D[g]](r[\"get\"+D[g]]()+l):r.setDate(r.getDate()-(r.getDay()||7)+v),\"month\"!==g&&\"year\"!==g||y===r.getDate()||r.setDate(0)}return r}});\n//# sourceMappingURL=index.min.js.map\n","import { addStyle, closest, dispatchEvent, toggleAttribute, queryAll } from '../utils'\nimport parse from '@nrk/simple-date-parse'\n\nconst MASK = { year: '*-m-d', month: 'y-*-d', day: 'y-m-*', hour: '*:m', minute: 'h:*', second: 'h:m:*', timestamp: '*', null: '*' }\nconst KEYS = { 33: '-1month', 34: '+1month', 35: 'y-m-99', 36: 'y-m-1', 37: '-1day', 38: '-1week', 39: '+1day', 40: '+1week' }\nconst MONTHS = 'januar,februar,mars,april,mai,juni,juli,august,september,oktober,november,desember'\nconst DAYS = 'man,tirs,ons,tors,fre,lør,søn'\n\nexport default class CoreDatepicker extends HTMLElement {\n  static get observedAttributes () { return ['timestamp', 'months', 'days'] }\n\n  connectedCallback () {\n    this._date = this.date // Store for later comparison and speeding up things\n    document.addEventListener('click', this)\n    document.addEventListener('change', this)\n    document.addEventListener('keydown', this)\n    setTimeout(() => this.attributeChangedCallback()) // Render after children is parsed\n    addStyle(this.nodeName, `${this.nodeName}{display:block}`) //  default to display block\n  }\n\n  disconnectedCallback () {\n    this._date = this._disabled = null // Garbage collection\n    document.removeEventListener('click', this)\n    document.removeEventListener('change', this)\n    document.removeEventListener('keydown', this)\n  }\n\n  attributeChangedCallback () {\n    if (!this._date) return // Only render after connectedCallback\n    if (this.disabled(this.date) && !this.disabled(this._date)) return (this.date = this._date) // Jump back\n    if (this.diff(this.date)) dispatchEvent(this, 'datepicker.change', this._date = this.date)\n\n    forEach('button', this, button)\n    forEach('select', this, select)\n    forEach('input', this, input)\n    forEach('table', this, table)\n  }\n\n  handleEvent (event) {\n    if (event.defaultPrevented || event.ctrlKey || event.metaKey || event.shiftKey || event.altKey || (event.type === 'keydown' && !KEYS[event.keyCode])) return\n    if (!this.contains(event.target) && !closest(event.target, `[for=\"${this.id}\"]`)) return\n    if (event.type === 'change') this.date = MASK[event.target.getAttribute('data-type')].replace('*', event.target.value)\n    else if (event.type === 'click') {\n      const button = closest(event.target, 'button[value]')\n      const table = closest(event.target, 'table')\n      if (button) this.date = button.value\n      if (button && table) dispatchEvent(this, 'datepicker.click.day')\n    } else if (event.type === 'keydown' && closest(event.target, 'table')) {\n      this.date = KEYS[event.keyCode]\n      this.querySelector('[autofocus]').focus()\n      event.preventDefault() // Prevent scrolling\n    }\n  }\n\n  diff (val) { return this.parse(val).getTime() - this.timestamp }\n\n  parse (val, from) { return parse(val, from || this._date) }\n\n  get disabled () { return this._disabled || Function.prototype }\n\n  set disabled (fn) {\n    this._disabled = typeof fn === 'function' ? (val) => fn(this.parse(val), this) : () => fn // Auto parse dates\n    this.attributeChangedCallback() // Re-render\n  }\n\n  get timestamp () { return String(this._date.getTime()) }\n\n  // Stringify for consistency and for truthy '0'\n  get year () { return String(this._date.getFullYear()) }\n\n  get month () { return pad(this._date.getMonth() + 1) }\n\n  get day () { return pad(this._date.getDate()) }\n\n  get hour () { return pad(this._date.getHours()) }\n\n  get minute () { return pad(this._date.getMinutes()) }\n\n  get second () { return pad(this._date.getSeconds()) }\n\n  get date () { return parse(this.getAttribute('timestamp') || this._date || Date.now()) }\n\n  set date (val) { return this.setAttribute('timestamp', this.parse(val).getTime()) }\n\n  set months (val) { this.setAttribute('months', [].concat(val).join(',')) }\n\n  get months () { return (this.getAttribute('months') || MONTHS).split(/\\s*,\\s*/) }\n\n  set days (val) { this.setAttribute('days', [].concat(val).join(',')) }\n\n  get days () { return (this.getAttribute('days') || DAYS).split(/\\s*,\\s*/) }\n}\n\nconst pad = (val) => `0${val}`.slice(-2)\nconst forEach = (css, self, fn) => [].forEach.call(document.getElementsByTagName(css), (el) => {\n  if (self.contains(el) || self.id === el.getAttribute(self.external)) fn(self, el)\n})\n\nfunction button (self, el) {\n  if (!el.value) return // Skip buttons without a set value\n  el.type = 'button' // Ensure forms are not submitted by datepicker-buttons\n  el.disabled = self.disabled(el.value)\n}\n\nfunction input (self, el) {\n  const type = el.getAttribute('data-type') || el.getAttribute('type')\n\n  if (type === 'radio' || type === 'checkbox') {\n    el.disabled = self.disabled(el.value)\n    el.checked = !self.diff(el.value)\n  } else if (MASK[type]) {\n    el.setAttribute('type', 'number') // Set input type to number\n    el.setAttribute('data-type', type) // And store original type\n    el.value = self[type]\n  }\n}\n\nfunction table (self, table) {\n  if (!table.firstElementChild) {\n    table.innerHTML = `\n    <caption></caption><thead><tr>${Array(8).join('</th><th>')}</tr></thead>\n    <tbody>${Array(7).join(`<tr>${Array(8).join('<td><button type=\"button\"></button></td>')}</tr>`)}</tbody>`\n  }\n\n  const today = new Date()\n  const month = self.date.getMonth()\n  const day = self.parse('y-m-1 mon') // Monday in first week of month\n  table.caption.textContent = `${self.months[month]}, ${self.year}`\n\n  queryAll('th', table).forEach((th, day) => (th.textContent = self.days[day]))\n  queryAll('button', table).forEach((button) => {\n    const isSelected = !self.diff(day)\n    const dayInMonth = day.getDate()\n    const dayMonth = day.getMonth()\n\n    button.textContent = dayInMonth // Set textContent instead of innerHTML avoids reflow\n    button.value = `${day.getFullYear()}-${dayMonth + 1}-${dayInMonth}`\n    button.disabled = self.disabled(day)\n    button.tabIndex = isSelected - 1\n    button.setAttribute('data-adjacent', month !== dayMonth)\n    button.setAttribute('aria-label', `${dayInMonth}. ${self.months[dayMonth]}`)\n    button.setAttribute('aria-current', day.getDate() === today.getDate() && day.getMonth() === today.getMonth() && day.getFullYear() === today.getFullYear() && 'date')\n    toggleAttribute(button, 'autofocus', isSelected)\n    day.setDate(dayInMonth + 1)\n  })\n}\n\nfunction select (self, select) {\n  if (!select.firstElementChild) {\n    select._autofill = true\n    select.innerHTML = self.months.map((name, month) =>\n      `<option value=\"y-${month + 1}-d\"></option>`\n    ).join('')\n  }\n\n  queryAll(select.children).forEach((option, month) => {\n    if (select._autofill) option.textContent = self.months[month]\n    option.disabled = self.disabled(option.value)\n    option.selected = !self.diff(option.value)\n  })\n}\n","import React from 'react';\n\n/**\n* closest\n* @param {Element} el Element to traverse up from\n* @param {String} css A selector to search for matching parents or element itself\n* @return {Element|null}  Element which is the closest ancestor matching selector\n*/\nvar closest = (function () {\n  var proto = typeof window === 'undefined' ? {} : window.Element.prototype;\n  var match = proto.matches || proto.msMatchesSelector || proto.webkitMatchesSelector;\n  return proto.closest ? function (el, css) { return el.closest(css); } : function (el, css) {\n    for (;el; el = el.parentElement) { if (match.call(el, css)) { return el } }\n    return null\n  }\n})();\n\n/**\n* customElementToReact\n* @param {Class|Function} elementClass A custom element definition.\n* @param {Array} options Props and custom events\n* @return {Object} A React component\n*/\nfunction customElementToReact (elementClass, options) {\n  if ( options === void 0 ) options = {};\n\n  var name = elementClass.name || String(elementClass).match(/function ([^(]+)/)[1]; // String match for IE11\n  var dashCase = name.replace(/.[A-Z]/g, function (ref) {\n    var a = ref[0];\n    var b = ref[1];\n\n    return (a + \"-\" + b);\n  }); // NameName -> name-name\n  var customProps = options.props || [];\n  var customEvents = options.customEvents || [];\n  var eventMap = customEvents.reduce(function (map, eventName) {\n    map[eventName] = \"on\" + (eventName.replace(/(^|\\.)./g, function (m) { return m.slice(-1).toUpperCase(); })); // input.filter => onInputFilter\n    return map\n  }, {});\n  var skipProps = customProps.concat('forwardRef', Object.keys(eventMap).map(function (onEventName) { return eventMap[onEventName]; }));\n  var tagName = (dashCase + \"-\" + (options.suffix || 'react')).replace(/\\W+/g, '-').toLowerCase();\n\n  return /*@__PURE__*/(function (superclass) {\n    function anonymous (props) {\n      var this$1 = this;\n\n      superclass.call(this, props);\n      // Register ref prop for accessing custom element https://reactjs.org/docs/refs-and-the-dom.html#callback-refs\n      this.ref = function (el) {\n        if (typeof this$1.props.forwardRef === 'function') { this$1.props.forwardRef(el); }\n        else if (this$1.props.forwardRef) { this$1.props.forwardRef.current = el; }\n        return (this$1.el = el)\n      };\n      // Register event handler on component for each custom event\n      Object.keys(eventMap).forEach(function (eventName) {\n        var onEventName = eventMap[eventName];\n        this$1[eventName] = function (event) {\n          if (this$1.props[onEventName] && closest(event.target, this$1.el.nodeName) === this$1.el) {\n            this$1.props[onEventName](event);\n          }\n        };\n      });\n    }\n\n    if ( superclass ) anonymous.__proto__ = superclass;\n    anonymous.prototype = Object.create( superclass && superclass.prototype );\n    anonymous.prototype.constructor = anonymous;\n\n    anonymous.prototype.componentDidMount = function componentDidMount () {\n      var this$1 = this;\n\n      // Run connectedCallback() after React componentDidMount() to allow React hydration to run first\n      if (!window.customElements.get(tagName)) {\n        window.customElements.define(tagName, elementClass);\n      }\n\n      // Populate properties on custom element\n      customProps.forEach(function (propName) {\n        if (propName in this$1.props) {\n          this$1.el[propName] = this$1.props[propName];\n        }\n      });\n\n      // Register events on custom element\n      customEvents.forEach(function (eventName) {\n        this$1.el.addEventListener(eventName, this$1[eventName]);\n      });\n    };\n\n    anonymous.prototype.componentDidUpdate = function componentDidUpdate (prev) {\n      var this$1 = this;\n\n      // Sync prop changes to custom element\n      customProps.forEach(function (propName) {\n        if (prev[propName] !== this$1.props[propName]) {\n          this$1.el[propName] = this$1.props[propName];\n        }\n      });\n    };\n\n    anonymous.prototype.componentWillUnmount = function componentWillUnmount () {\n      var this$1 = this;\n\n      // Remove event handlers on custom element on unmount\n      customEvents.forEach(function (eventName) {\n        this$1.el.removeEventListener(eventName, this$1[eventName]);\n      });\n    };\n\n    anonymous.prototype.render = function render () {\n      var this$1 = this;\n\n      // Convert React props to CustomElement props https://github.com/facebook/react/issues/12810\n      return React.createElement(tagName, Object.keys(this.props).reduce(function (thisProps, propName) {\n        if (skipProps.indexOf(propName) === -1) { // Do not render customEvents and custom props as attributes\n          if (propName === 'className') { thisProps.class = this$1.props[propName]; } // Fixes className for custom elements\n          else if (this$1.props[propName] === true) { thisProps[propName] = ''; } // Fixes boolean attributes\n          else if (this$1.props[propName] !== false) { thisProps[propName] = this$1.props[propName]; } // Pass only truthy, non-function props\n        }\n        return thisProps\n      }, { ref: this.ref }))\n    };\n\n    return anonymous;\n  }(React.Component))\n}\n\nexport default customElementToReact;\n","import CoreDatepicker from './core-datepicker.js'\nimport { version } from './package.json'\nimport customElementToReact from '@nrk/custom-element-to-react'\n\nexport default customElementToReact(CoreDatepicker, {\n  props: ['disabled'],\n  customEvents: ['datepicker.change', 'datepicker.click.day'],\n  suffix: version\n})\n"],"names":["IS_BROWSER","window","IS_ANDROID","test","navigator","userAgent","IS_IOS","String","platform","global","HTMLElement","addStyle","nodeName","css","key","toLowerCase","min","replace","document","getElementById","head","insertAdjacentHTML","closest","proto","Element","prototype","match","matches","msMatchesSelector","webkitMatchesSelector","el","correspondingUseElement","parentElement","call","dispatchEvent","element","name","detail","ignore","event","CustomEvent","bubbles","cancelable","createEvent","initCustomEvent","result","toggleAttribute","force","hasAttribute","queryAll","elements","context","nodeType","slice","querySelectorAll","length","e","t","module","this","D","year","month","week","day","hour","minute","second","w","M","p","isFinite","Date","Number","n","r","indexOf","now","a","o","i","s","d","u","h","m","c","Object","keys","forEach","substr","Math","max","f","getDate","setFullYear","setHours","exec","g","l","v","y","setDate","getDay","MASK","timestamp","KEYS","MONTHS","DAYS","CoreDatepicker","_date","date","addEventListener","setTimeout","attributeChangedCallback","_disabled","removeEventListener","disabled","diff","button","select","input","table","defaultPrevented","ctrlKey","metaKey","shiftKey","altKey","type","keyCode","contains","target","id","getAttribute","value","querySelector","focus","preventDefault","val","parse","getTime","from","Function","fn","getFullYear","pad","getMonth","getHours","getMinutes","getSeconds","setAttribute","concat","join","split","self","getElementsByTagName","external","checked","firstElementChild","innerHTML","Array","today","caption","textContent","months","th","days","isSelected","dayInMonth","dayMonth","tabIndex","_autofill","map","children","option","selected","customElementToReact","elementClass","options","dashCase","ref","b","customProps","props","customEvents","eventMap","reduce","eventName","toUpperCase","skipProps","onEventName","tagName","suffix","superclass","anonymous","this$1","forwardRef","current","__proto__","create","constructor","componentDidMount","customElements","get","define","propName","componentDidUpdate","prev","componentWillUnmount","render","React","createElement","thisProps","Component","version"],"mappings":"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"}