import e,{forwardRef as t,useState as r,useRef as n,useEffect as a}from"react";import o from"crypto";import{Label as l,SupportLabel as i}from"@fremtind/jkl-core";import{IconButton as c}from"@fremtind/jkl-icon-button-react";function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done)&&(r.push(l.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var f=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){var t={}.hasOwnProperty;function r(){for(var e=[],n=0;n<arguments.length;n++){var a=arguments[n];if(a){var o=typeof a;if("string"===o||"number"===o)e.push(a);else if(Array.isArray(a)&&a.length){var l=r.apply(null,a);l&&e.push(l)}else if("object"===o)for(var i in a)t.call(a,i)&&a[i]&&e.push(i)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):window.classNames=r}()}));f.named;let m={},v=(e=21)=>{let t=(e=>{let t=m[e];return t||(t=Buffer.allocUnsafe(e),e<=255&&(m[e]=t)),o.randomFillSync(t)})(e),r="";for(;e--;)r+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[63&t[e]];return r};var y=t((function(t,o){var c=t.id,d=t.variant,m=t.inverted,y=t.label,b=t.className,h=t.helpLabel,x=t.errorLabel,j=t.rows,w=void 0===j?7:j,k=t.placeholder,g=void 0===k?" ":k,O=t.autoExpand,N=void 0!==O&&O,E=t.forceCompact,L=p(t,["id","variant","inverted","label","className","helpLabel","errorLabel","rows","placeholder","autoExpand","forceCompact"]),A=f("jkl-text-input jkl-text-area",b,{"jkl-text-input--compact":E,"jkl-text-input--inverted":m}),C=s(r(c||"jkl-text-area-".concat(v(8))),1)[0],B=s(r("jkl-support-label-".concat(v(8))),1)[0],S=s(r(!1),2),_=S[0],F=S[1],I=s(r(0),2),T=I[0],M=I[1],P=s(r(1),2),H=P[0],U=P[1],X=n(null),q=o||X;return a((function(){var e=q.current;if(N&&e){var t=e.value,r=e.placeholder,n=e.rows;e.value="",e.placeholder="",e.rows=1,M(e.scrollHeight),e.value=t,e.placeholder=r,e.rows=n}}),[q,N]),a((function(){var e=q.current,t=w;if(e){var r=function(e,t){var r=window?window.getComputedStyle(e).lineHeight:"16px",n=parseInt(r.replace("px","")),a=e.rows;e.rows=1;var o=Math.ceil((e.scrollHeight-t)/n)+1;return e.rows=a,o}(e,T);_||L.value?U(Math.max(t,r)):U(r)}}),[q,L.value,_,T,w]),e.createElement("div",{"data-testid":"jkl-text-area",className:A},e.createElement(l,{standAlone:!0,htmlFor:C,variant:d,forceCompact:E},y),e.createElement("textarea",u({id:C,ref:q,className:"jkl-text-input__input jkl-text-input__input--".concat(w,"-rows"),onFocus:function(e){F(!0),L.onFocus&&L.onFocus(e)},onBlur:function(e){F(!1),L.onBlur&&L.onBlur(e)},"aria-invalid":!!x,"aria-describedby":B,placeholder:g,rows:N?H:void 0,style:N?{height:"auto",overflowX:"hidden"}:void 0},L)),e.createElement(i,{inverted:m,id:B,helpLabel:h,errorLabel:x,forceCompact:E}))}));function b(e,t){if(e)return{width:e};if(t){var r="".concat(Math.min(t,40),"ch");return{width:"calc(".concat(r," + ").concat("24px",")")}}}y.displayName="TextArea";var h=t((function(t,r){var n=t.id,a=t.describedBy,o=t.invalid,l=t.maxLength,i=t.width,c=t.type,s=void 0===c?"text":c,d=t.className,f=void 0===d?"":d,m=p(t,["id","describedBy","invalid","maxLength","width","type","className"]);return e.createElement("input",u({ref:r,id:n,className:"jkl-text-input__input ".concat(f),style:b(i,l),"aria-describedby":a,"aria-invalid":o,maxLength:l,type:s},m))}));h.displayName="BaseInputField";var x=t((function(t,n){var a=t.id,o=t.className,d=t.label,m=t.helpLabel,y=t.errorLabel,b=t.variant,x=void 0===b?"medium":b,j=t.inline,w=t.inverted,k=t.forceCompact,g=t.action,O=p(t,["id","className","label","helpLabel","errorLabel","variant","inline","inverted","forceCompact","action"]),N=s(r(a||"jkl-text-input-".concat(v(8))),1)[0],E=s(r("jkl-support-label-".concat(v(8))),1)[0],L=m||y?E:void 0,A=f({"jkl-text-input":!0,"jkl-text-input--inline":j,"jkl-text-input--inverted":w,"jkl-text-input--compact":k,"jkl-text-input--action":g},o);return e.createElement("div",{"data-testid":"jkl-text-input",className:A},e.createElement(l,{forceCompact:k,standAlone:!0,srOnly:j,htmlFor:N,variant:x},d),e.createElement("div",{className:"jkl-text-input__input-wrapper"},e.createElement(h,u({ref:n,id:N,describedBy:L,invalid:!!y},O)),g&&e.createElement(c,{className:"jkl-text-input__action-button",iconType:g.icon,buttonTitle:g.label,onClick:g.onClick,onFocus:g.onFocus,onBlur:g.onBlur})),e.createElement(i,{inverted:w,id:E,helpLabel:m,errorLabel:y,srOnly:j}))}));x.displayName="TextInput";export{h as BaseInputField,y as TextArea,x as TextInput};
